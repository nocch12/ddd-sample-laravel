# 加盟企業
companies:
  columns:
    id: string # 企業コード
    name: string # 企業名
    joined_at: dateTime # 契約日
    timestamps:
  indexes:
    - columns: [id]
      type: primary      

# 店舗
shops:
  columns:
    id:
    store_code: string # 店舗コード
    company_id: string # 企業コード
    name: string # 店舗名
    address: string # 所在地
    timestamps:
  indexes:
    - columns: [store_code, company_id]
      type: unique

# 横断分析用商品
cross_section_items:
  columns:
    id: string # 横断分析用商品コード
    name: string # 横断分析用商品名
    timestamps:
  indexes:
    - columns: [id]
      type: primary

# 加盟企業商品
company_items:
  columns:
    id:
    company_id: string # 加盟企業コード
    item_id: string # 加盟企業商品コード
    name: string # 加盟企業商品名
    cross_section_item_id: # 横断分析用商品コード
      type: string
      nullable:
    jan_code: # JANコード
      type: string
      args: 13
      nullable:
    timestamps:
  indexes:
    - columns: [item_id, company_id]
      type: unique      
  foreign_keys:
    - columns: [company_id]
      references: [id]
      table: companies
    - columns: [cross_section_item_id]
      references: [id]
      table: cross_section_items
